option java_package = "ru.yandex.yweb.proto";

message TAura {
    optional uint32 Unique = 1;
    optional uint32 Oldest = 2;
    optional uint32 Newest = 3;
    optional uint32 Shared = 4;
    optional uint32 Author = 5;
    optional uint32 Unauth = 6;
    optional uint32 Coauth = 7;

    optional uint64 SharedSpread = 8;
    optional uint64 AuthorSpread = 9;  // Deprecated
    optional uint64 UnauthSpread = 10; // Deprecated

    optional double UniqueWeight = 11;
    optional double SharedWeight = 12;
    optional double AuthorWeight = 13;
    optional double UnauthWeight = 14;

    optional uint64 AuthorSource = 15;
    optional uint64 UnauthSource = 16; // Deprecated
    optional uint64 UnauthAuthor = 17; // Deprecated

    optional uint32 Origin = 18;

    optional uint32 FltShared       = 19; // Filtered Oldest + Newest + Shared
    optional uint64 FltSharedSpread = 20;

    optional uint32 FltAuthor       = 21;
    optional uint64 FltAuthorSource = 22;

    // More info about originals
    optional uint32 OriginNonUniq = 23; // Non-unique originality marker
    optional uint32 OriginBadTime = 24; // Originality conflicts with other owners' time
    optional uint32 OriginBadAuth = 25; // Originality conflicts with shingle authorship
    optional uint32 OrigEx        = 26; // Extended originals markers
    optional uint32 OrigExNonUniq = 27;
    optional uint32 OrigExBadTime = 28;
    optional uint32 OrigExBadAuth = 29;
}

// A modified aura to be used in features
message TAuraFeatures {
    // Logarithms of number of shingles of each type
    optional double LogUnique = 1;
    optional double LogOldest = 2;
    optional double LogNewest = 3;
    optional double LogShared = 4;
    optional double LogAuthor = 5;
    optional double LogUnauth = 6;
    optional double LogCoauth = 7;

    // Mean number of owners on shingles of each type
    optional double MeanSharedSpread = 8;  // All shared: Oldest + Newest + Shared
    optional double MeanAuthorSpread = 9;  // Deprecated
    optional double MeanUnauthSpread = 10; // Deprecated

    // Mean weight of shingles of each type
    optional double MeanUniqueWeight = 11;
    optional double MeanSharedWeight = 12; // All shared: Oldest + Newest + Shared
    optional double MeanAuthorWeight = 13;
    optional double MeanUnauthWeight = 14;

    optional double MeanAuthorSource = 15; // Deprecated
    optional double MeanUnauthSource = 16; // Deprecated
    optional double MeanUnauthAuthor = 17; // Deprecated

    optional double LogOrigin = 18;
    optional double MeanFltAuthorSource = 19;

    optional double RelAuthor = 20;
    optional double RelOrigin = 21;
}

message TAuraAux {
    optional uint32 BadScnd = 1; // Badness of shared content
}

// Factors for ranking
message TDocAuraFactors {
    required uint32 DocLogShared = 1;
    required uint32 DocLogAuthor = 2;
    required uint32 DocMeanSharedWeight = 3;
    required uint32 DocLogOrigin = 4;
    optional uint32 DocRelAuthor = 5;
    optional uint32 DocRelOrigin = 6;
}

message TOwnerAuraFactors {
    required uint32 OwnerLogUnique = 1;
    required uint32 OwnerLogShared = 2;
    required uint32 OwnerLogAuthor = 3;
    required uint32 OwnerLogUnauth = 4;
    required uint32 OwnerMeanSharedSpread = 5;
    required uint32 OwnerLogOrigin = 6;
    optional uint32 OwnerRelAuthor = 7;
}

syntax = "proto3";

package yandex.cloud.priv.billing.v1alpha1;

import "google/api/annotations.proto";

import "yandex/cloud/priv/billing/v1alpha1/residencies.proto";
import "yandex/cloud/priv/billing/v1alpha1/forms.proto";
import "yandex/cloud/priv/operation/operation.proto";
import "yandex/cloud/api/operation.proto";
import "yandex/cloud/priv/billing/v1alpha1/console/console_billing_accounts_service.proto";
import "yandex/cloud/priv/billing/v1alpha1/person.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/billing/v1alpha1/console;billing";

service ConsolePersonsService {
    rpc GetPersonTypesMetaData (GetPersonTypesMetaDataRequest) returns (GetPersonTypesMetaDataResponse) {
        option (google.api.http) = { get: "/billing/v1alpha1/console/persons/types/metaData"};
    }

    rpc ListPersons (Empty) returns (ListPersonsResponse) {
        option (google.api.http) = { get: "/billing/v1alpha1/console/persons"};
    }

    rpc GetPerson (GetPersonRequest) returns (Person) {
        option (google.api.http) = { get: "/billing/v1alpha1/console/persons/{person_id}"};
    }

    rpc CreatePerson (Person) returns (operation.Operation) {
        option (yandex.cloud.api.operation) = {
                metadata: "PersonOperationMetadata"
                response: "Empty"
            };
        option (google.api.http) = { post: "/billing/v1alpha1/console/persons" body: "*"};
    }
}


message ListPersonsResponse {
    repeated Person response = 1;
}

message GetPersonRequest {
    string person_id = 1;
}

message PersonOperationMetadata {
    string id = 1;
}

message GetPersonTypesMetaDataRequest {}


message GetPersonTypesMetaDataResponse {
    repeated Person.Type legal_entities_person_types = 1;
    repeated PersonTypeAndCreationFormPair creation_form_by_person_type = 2;
    repeated PersonTypeAndShowFormPair show_form_by_person_type = 3;
    repeated PersonTypeAndPaymentTypesPair available_payment_types_by_person_type = 4;
}

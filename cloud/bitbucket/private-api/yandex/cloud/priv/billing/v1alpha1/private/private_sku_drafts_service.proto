syntax = "proto3";

package yandex.cloud.priv.billing.v1alpha1;

import "google/api/annotations.proto";
import "yandex/cloud/api/operation.proto";
import "yandex/cloud/api/tools/options.proto";
import "yandex/cloud/priv/operation/operation.proto";
import "yandex/cloud/priv/billing/v1alpha1/sku_draft.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/billing/v1alpha1/private;billing";

service PrivateSkuDraftService {

  rpc GetSkuDraft (GetSkuDraftRequest) returns (SkuDraft) {
    option (google.api.http) = { get: "/billing/v1alpha1/private/skuDrafts/{id}" };
  }

  rpc ListSkuDraft (ListSkuDraftRequest) returns (ListSkuDraftResponse) {
    option (google.api.http) = { get: "/billing/v1alpha1/private/skuDrafts"};
  }

  rpc CreateSkuDraft (CreateSkuDraftRequest) returns (operation.Operation) {

    option (yandex.cloud.api.operation) = {
        metadata: "EmptyMetadata"
        response: "SkuDraft"
    };

    option (google.api.http) = { post: "/billing/v1alpha1/private/skuDrafts" body: "*"};
  }

  rpc UpdateSkuDraft (UpdateSkuDraftRequest) returns (operation.Operation) {
    option (yandex.cloud.api.tools.method).lint_skip.http_verb = true;
    option (yandex.cloud.api.operation) = {
        metadata: "EmptyMetadata"
        response: "SkuDraft"
    };

    option (google.api.http) = { post: "/billing/v1alpha1/private/skuDrafts:update" body: "*"};
  }

  rpc AcceptSkuDraft (AcceptSkuDraftRequest) returns (operation.Operation) {

    option (yandex.cloud.api.operation) = {
        metadata: "EmptyMetadata"
        response: "SkuDraft"
    };

    option (google.api.http) = { post: "/billing/v1alpha1/private/skuDrafts:accept" body: "*"};
  }


  rpc RejectSkuDraft (RejectSkuDraftRequest) returns (operation.Operation) {

    option (yandex.cloud.api.operation) = {
        metadata: "EmptyMetadata"
        response: "SkuDraft"
    };

    option (google.api.http) = { post: "/billing/v1alpha1/private/skuDrafts:reject" body: "*"};
  }

}

message GetSkuDraftRequest {
  string id = 1;
}

message AcceptSkuDraftRequest {
  string id = 1;
}

message RejectSkuDraftRequest {
  string id = 1;
}


message ListSkuDraftRequest {
  int64 page_size = 1;
  string page_token = 2;
  string status = 3;
}

message CreateSkuDraftRequest {

  string sku_id = 1;
  string sku_name = 2;

  SkuDraftService service = 3;
  SkuDraftUnits units = 4;
  SkuDraftTranslations translations = 5;
  SkuDraftResolving resolving = 6;

}

message UpdateSkuDraftRequest {

  string id = 1;
  string sku_id = 2;
  string sku_name = 3;

  SkuDraftService service = 4;
  SkuDraftUnits units = 5;
  SkuDraftTranslations translations = 6;
  SkuDraftResolving resolving = 7;

}

message ListSkuDraftResponse {
  repeated SkuDraft sku_drafts = 1;
  string next_page_token = 2;
}

syntax = "proto3";

package yandex.cloud.priv.vdi.v1.desktop;

import "yandex/cloud/priv/sensitive.proto";
import "yandex/cloud/priv/validation.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/vdi/v1/desktop_agent;vdi_desktop";
option java_outer_classname = "PDDAS";

service DesktopAgentService {
    // Leave this while until we came to final decision about password control
    rpc ChangePassword (ChangePasswordRequest) returns (ChangePasswordResponse);

    rpc ResetPassword(ResetPasswordRequest) returns (ResetPasswordResponse);

    rpc GetStatus (GetStatusRequest) returns (GetStatusResponse);
}

message ChangePasswordRequest {
    string username = 1 [(required) = true, (length) = "<=256"];
    string password = 2 [(required) = true, (length) = "<=256", (sensitive) = true, (sensitive_type) = SENSITIVE_REMOVE];
}

message ChangePasswordResponse {
    bool password_changed = 1;
    string message = 2 [(length) = "<=256"];
}

message ResetPasswordRequest {
    string username = 1 [(required) = true, (length) = "<=256"];
}

message ResetPasswordResponse {
    string tmp_password = 1 [(sensitive) = true];
}

// a placeholder for further extensibility
message GetStatusRequest {
}

message GetStatusResponse {
}

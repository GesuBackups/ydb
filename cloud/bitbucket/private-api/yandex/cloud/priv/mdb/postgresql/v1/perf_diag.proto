syntax = "proto3";

package yandex.cloud.priv.mdb.postgresql.v1;

import "google/protobuf/timestamp.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/mdb/postgresql/v1;postgresql";
option java_outer_classname = "PPDIAG";

message SessionState {
  // Collect timestamp in [RFC3339](https://www.ietf.org/rfc/rfc3339.txt) text format.
  google.protobuf.Timestamp time = 1;
  string host = 2;
  int64 pid = 3;
  string database = 4;
  string user = 5;
  string application_name = 6;
  google.protobuf.Timestamp backend_start = 7;
  google.protobuf.Timestamp xact_start = 8;
  google.protobuf.Timestamp query_start = 9;
  google.protobuf.Timestamp state_change = 10;
  string wait_event_type = 11;
  string wait_event = 12;
  string state = 13;
  string query = 14;
  string backend_type = 15;
}

message Statement {
  // Collect timestamp in [RFC3339](https://www.ietf.org/rfc/rfc3339.txt) text format.
  google.protobuf.Timestamp time = 1;
  string host = 2;
  string user = 3;
  string database = 4;
  string queryid = 5;
  string query = 6;
  int64 calls = 7;
  double total_time = 8;
  double min_time = 9;
  double max_time = 10;
  double mean_time = 11;
  double stddev_time = 12;
  int64 rows = 13;
  int64 shared_blks_hit = 14;
  int64 shared_blks_read = 15;
  int64 shared_blks_dirtied = 16;
  int64 shared_blks_written = 17;
  double blk_read_time = 18;
  double blk_write_time = 19;
  int64 temp_blks_read = 20;
  int64 temp_blks_written = 21;
  int64 reads = 22;
  int64 writes = 23;
  double user_time = 24;
  double system_time = 25;
}

message Interval {
  // Collect timestamp in [RFC3339](https://www.ietf.org/rfc/rfc3339.txt) text format.
  google.protobuf.Timestamp start_time = 1;
  google.protobuf.Timestamp end_time = 2;
}

message DiffStatement {
  Interval first_interval = 1;
  Interval second_interval = 2;
  string host = 3;
  string user = 4;
  string database = 5;
  string queryid = 6;
  string query = 7;
  int64 first_calls = 8;
  int64 second_calls = 9;
  double first_total_time = 10;
  double second_total_time = 11;
  double first_min_time = 12;
  double second_min_time = 13;
  double first_max_time = 14;
  double second_max_time = 15;
  double first_mean_time = 16;
  double second_mean_time = 17;
  double first_stddev_time = 18;
  double second_stddev_time = 19;
  int64 first_rows = 20;
  int64 second_rows = 21;
  int64 first_shared_blks_hit = 22;
  int64 second_shared_blks_hit = 23;
  int64 first_shared_blks_read = 24;
  int64 second_shared_blks_read = 25;
  int64 first_shared_blks_dirtied = 26;
  int64 second_shared_blks_dirtied = 27;
  int64 first_shared_blks_written = 28;
  int64 second_shared_blks_written = 29;
  double first_blk_read_time = 30;
  double second_blk_read_time = 31;
  double first_blk_write_time = 32;
  double second_blk_write_time = 33;
  int64 first_temp_blks_read = 34;
  int64 second_temp_blks_read = 35;
  int64 first_temp_blks_written = 36;
  int64 second_temp_blks_written = 37;
  int64 first_reads = 38;
  int64 second_reads = 39;
  int64 first_writes = 40;
  int64 second_writes = 41;
  double first_user_time = 42;
  double second_user_time = 43;
  double first_system_time = 44;
  double second_system_time = 45;
  double diff_calls = 46;
  double diff_total_time = 47;
  double diff_min_time = 48;
  double diff_max_time = 49;
  double diff_mean_time = 50;
  double diff_stddev_time = 51;
  double diff_rows = 52;
  double diff_shared_blks_hit = 53;
  double diff_shared_blks_read = 54;
  double diff_shared_blks_dirtied = 55;
  double diff_shared_blks_written = 56;
  double diff_blk_read_time = 57;
  double diff_blk_write_time = 58;
  double diff_temp_blks_read = 59;
  double diff_temp_blks_written = 60;
  double diff_reads = 61;
  double diff_writes = 62;
  double diff_user_time = 63;
  double diff_system_time = 64;
}

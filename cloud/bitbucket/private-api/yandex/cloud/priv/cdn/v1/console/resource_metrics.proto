syntax = "proto3";

package yandex.cloud.priv.cdn.v1.console;

import "yandex/cloud/api/tools/options.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/cdn/v1/console;cdn_console";

message ResourceMetricsAggregate {
    message ResourceMetricCounter {
        int64 value = 1;
    }

    message ResourceMetricGauge {
        double value = 1;
    }

    ResourceMetricCounter upstream_bytes = 1;
    ResourceMetricCounter send_bytes = 2;
    ResourceMetricCounter total_bytes = 3; // upstream_bytes + send_bytes

    ResourceMetricCounter requests = 4;

    ResourceMetricCounter responses_2xx = 5 [json_name = "responses2xx", (yandex.cloud.api.tools.field).lint_skip.json_name = true];
    ResourceMetricCounter responses_3xx = 6 [json_name = "responses3xx", (yandex.cloud.api.tools.field).lint_skip.json_name = true];
    ResourceMetricCounter responses_4xx = 7 [json_name = "responses4xx", (yandex.cloud.api.tools.field).lint_skip.json_name = true];
    ResourceMetricCounter responses_5xx = 8 [json_name = "responses5xx", (yandex.cloud.api.tools.field).lint_skip.json_name = true];

    ResourceMetricCounter responses_hit = 9;
    ResourceMetricCounter responses_miss = 10;

    ResourceMetricGauge cache_hit_ratio = 11; // 1 - upstream_bytes / send_bytes

    ResourceMetricCounter shield_bytes = 12;
}

syntax = "proto3";

package yandex.cloud.priv.cdn.v1.console;

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/cdn/v1/console;cdn_console";

message OriginsGroup {
    // Origin Group ID.
    int64 id = 1;

    // Origin Folder ID.
    string folder_id = 2;

    // Origin Group Name.
    string name = 3;

    // use_next. This option have two possible conditions:
    // true - The option is active. In case the origin responds with 4XX or 5XX codes, use the next origin from the list.
    // false - The option is disabled.
    bool use_next = 4;

    repeated Origin origins = 5;
}

message Origin {
    int64 id = 1;
    string source = 2;
    bool enabled = 3;
    bool backup = 4;
    OriginType type = 5;
    OriginMeta meta = 6;
}

message OriginParams {
    string source = 1;
    bool enabled = 2;
    bool backup = 3;
    OriginType type = 4;
    OriginMeta meta = 5;
}

enum OriginType {
    ORIGIN_TYPE_UNSPECIFIED = 0;
    COMMON = 1;
    BUCKET = 2;
    WEBSITE = 3;
    BALANCER = 4;
}

message OriginMeta {
    oneof origin_meta_variant {
        OriginBucketMeta bucket = 1;
        OriginWebsiteMeta website = 2;
        OriginBalancerMeta balancer = 3;
    }
}

message OriginBucketMeta {
    string bucket_name = 1;
}

message OriginWebsiteMeta {
    string bucket_name = 1;
}

message OriginBalancerMeta {
    string id = 1;
}

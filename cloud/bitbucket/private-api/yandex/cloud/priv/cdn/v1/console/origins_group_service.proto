syntax = "proto3";

package yandex.cloud.priv.cdn.v1.console;

import "google/protobuf/empty.proto";
import "google/protobuf/wrappers.proto";
import "yandex/cloud/priv/cdn/v1/console/origins_group.proto";
import "yandex/cloud/priv/validation.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/cdn/v1/console;cdn_console";

//
// Origin Groups management service.
//
service OriginsGroupService {
  // Get origin group with specified origin group id.
  rpc Get(GetOriginsGroupRequest) returns (OriginsGroup);

  // List clients origin groups.
  rpc List(ListOriginsGroupsRequest) returns (ListOriginsGroupsResponse);

  // Create clients origin group.
  rpc Create(CreateOriginsGroupRequest) returns (OriginsGroup);

  // Update clients origin group.
  rpc Update(UpdateOriginsGroupRequest) returns (OriginsGroup);

  // Delete origin group with specified origin group id.
  rpc Delete(DeleteOriginsGroupRequest) returns (google.protobuf.Empty);
}

message GetOriginsGroupRequest {
  string folder_id = 1 [(required) = true, (length) = "<=50"];
  int64 origin_group_id = 2 [(value) = ">0"];
}

message ListOriginsGroupsRequest {
  string folder_id = 1 [(required) = true, (length) = "<=50"];
}

message CreateOriginsGroupRequest {
  string folder_id = 1 [(required) = true, (length) = "<=50"];

  // Origin Group Name.
  string name = 2;

  // use_next. This option have two possible conditions:
  // true - The option is active. In case the origin responds with 4XX or 5XX codes, use the next origin from the list.
  // false - The option is disabled.
  // default value is true
  google.protobuf.BoolValue use_next = 3;

  repeated OriginParams origins = 4;
}

message UpdateOriginsGroupRequest {
  string folder_id = 1 [(required) = true, (length) = "<=50"];
  int64 origin_group_id = 2 [(value) = ">0"];

  google.protobuf.StringValue group_name = 3;
  google.protobuf.BoolValue use_next = 4;

  repeated OriginParams origins = 5;
}

message DeleteOriginsGroupRequest {
  string folder_id = 1 [(required) = true, (length) = "<=50"];
  int64 origin_group_id = 2 [(value) = ">0"];
}

message ListOriginsGroupsResponse {
  repeated OriginsGroup origins_groups = 1;
}

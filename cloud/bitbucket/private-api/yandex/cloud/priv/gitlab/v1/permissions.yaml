permissions:
  gitlab.instances.create:
    description: Create Managed Gitlab instance
    stage: GA
    visibility: public
    allowedWhen:
      cloud:
        status:
          - ACTIVE
  gitlab.instances.delete:
    description: Delete Managed Gitlab instance
    stage: GA
    visibility: public
    allowedWhen:
      restrictions:
        - billSuspend
        - fraud
        - deletingContainer
      cloud:
        status:
          - ACTIVE
          - BLOCKED_BY_BILLING
          - DELETING
  gitlab.instances.get:
    description: Get Managed Gitlab instance info
    stage: GA
    visibility: public
    allowedWhen:
      restrictions:
        - billSuspend
        - fraud
        - deletingContainer
      cloud:
        status:
          - ACTIVE
          - BLOCKED
          - BLOCKED_BY_BILLING
          - DELETING
  gitlab.instances.update:
    description: Update Managed Gitlab instance
    stage: GA
    visibility: public
    allowedWhen:
      restrictions:
        - billSuspend
      cloud:
        status:
          - ACTIVE
          - BLOCKED_BY_BILLING

  gitlab.quotas.get:
    description: 'Get Managed Gitlab quotas'
    stage: GA
    visibility: public
    allowedWhen:
      restrictions:
        - billSuspend
      cloud:
        status:
          - BLOCKED
          - BLOCKED_BY_BILLING
          - ACTIVE

  gitlab.quotas.updateLimit:
    description: 'Update Managed Gitlab quotas'
    stage: GA
    visibility: internal
    allowedWhen:
      restrictions:
        - billSuspend
      cloud:
        status:
          - BLOCKED
          - BLOCKED_BY_BILLING
          - ACTIVE

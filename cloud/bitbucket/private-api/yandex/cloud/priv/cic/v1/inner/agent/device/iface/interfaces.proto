syntax = "proto3";

package yandex.cloud.priv.cic.v1.inner.agent.device.iface;

import "yandex/cloud/priv/cic/v1/inner/agent/device/iface/if_ethernet.proto";
import "yandex/cloud/priv/cic/v1/inner/agent/device/iface/if_ip.proto";
import "yandex/cloud/priv/cic/v1/inner/agent/device/iface/if_types.proto";
import "yandex/cloud/priv/cic/v1/inner/agent/device/vlan/vlan.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/cic/v1/inner/agent/device/iface;cic";
option java_outer_classname = "PCIADI";


message Interfaces {
  message Interface {
    message Subinterface { 
      message Filter {
        string inbound = 1;
        string outbound = 2;
      } 

      message Policer {
        oneof policer_in {
          string inbound = 1;
        }
        oneof policer_out {
          string outbound = 2;
        }
        oneof policer_arp {
          string arp = 3;
        }
        oneof policer_nd {
          string nd = 4;
        }
      } 

      int64 index = 1;
      string description = 2;
      int64 mtu = 3; // oc deviation
      vlan.SubifVlanId vlan = 4;
      Ip ipv4 = 5;
      Ip ipv6 = 6;
      bool ipv4_rpf = 7; // oc deviation
      bool ipv6_rpf = 8; // oc deviation
      Filter ipv4_filter = 9;
      Filter ipv6_filter = 10;
      oneof subif_policer {
        Policer policer = 11;
      }
    }
      
    string name = 1;
    InterfaceType type = 2;
    int64 mtu =  3;
    string description = 4;
    map <int64, Subinterface> subinterfaces = 5;
    EthernetParams ethernet_params = 6;
  }

  map<string, Interface>  ethernet = 1;
  map<string, Interface>  lag = 2;
  map<string, Interface>  loopback = 3;
}

role_groups:
  resource-manager:
    name: Resource Manager roles

roles:

  resource-manager.auditor:
    groups: [resource-manager]
    name: 'resource-manager auditor'
    visibility: internal
    description: ''
    scopes:
      - yc.resource-manager.clouds.get
      - yc.resource-manager.folders.get
    permissions:
      - resource-manager.clouds.listAccessBindings
      - resource-manager.folders.listAccessBindings

  resource-manager.viewer:
    groups: [resource-manager]
    name: 'resource-manager viewer'
    visibility: public
    description: ''
    scopes:
      - yc.resource-manager.clouds.get
      - yc.resource-manager.folders.get
    permissions:
      - resource-manager.clouds.listAccessBindings
      - resource-manager.folders.listAccessBindings

  resource-manager.editor:
    groups: [resource-manager]
    name: 'resource-manager editor'
    visibility: public
    description: ''
    includedRoles:
      - resource-manager.viewer
    scopes:
      - yc.resource-manager.clouds.manage
      - yc.resource-manager.folders.manage

  resource-manager.admin:
    groups: [resource-manager]
    name: 'resource-manager admin'
    visibility: public
    description: ''
    includedRoles:
      - resource-manager.editor
    scopes:
      - yc.resource-manager.clouds.accessBindings.manage
      - yc.resource-manager.folders.accessBindings.manage

  resource-manager.clouds.member:
    groups: [resource-manager]
    name: 'resource-manager clouds member'
    visibility: public
    description: возможность использовать пользователя при управлении политиками
    resourceType: resource-manager.cloud
    scopes:
      - yc.resource-manager.clouds.get
      - yc.support.tickets.manage
    permissions:
      - iam.resourceTypes.membership
      - iam.cloudUsers.list

  resource-manager.clouds.owner:
    groups: [resource-manager]
    name: 'resource-manager clouds owner'
    visibility: public
    description: полный доступ ко всем функциям в режиме чтения и записи, управление
      пользователями и политиками
    resourceType: resource-manager.cloud
    includedRoles:
      - admin
      - billing.clouds.owner
      - resource-manager.clouds.member
    permissions:
      - iam.accessBindings.manageOwners
      - resource-manager.clouds.delete

  internal.resource-manager.clouds.stageViewer:
    groups: [resource-manager]
    name: (Внутренняя) Чтение permission stages облака
    visibility: internal
    description: Чтение permission stages назначенных на облако
    permissions:
      - resource-manager.clouds.listPermissionStages

  internal.resource-manager.clouds.stageEditor:
    groups: [resource-manager]
    name: (Внутренняя) Управление permission stages облака
    visibility: internal
    description: Чтение и модификация permission stages назначенных на облако
    includedRoles:
      - internal.resource-manager.clouds.stageViewer
    permissions:
      - resource-manager.clouds.updatePermissionStages

  internal.resource-manager.agent:
    groups: [resource-manager]
    name: 'resource-manager agent'
    visibility: internal
    description: роль SA сервиса Resource Manager control plane
    permissions:
      - iam.serviceAccounts.crossCloudBindings
      - organization-manager.organizations.get
      - vpc.networks.create
      - vpc.subnets.create
      - billingInternal.accounts.activateReferralCode
      - billingInternal.accounts.bindCloud
      # XXX temporary permissions for rm-cp agent CLOUD-23726, should be removed
      - iam.clouds.get
      - resource-manager.clouds.get
      # XXX temporary permission for rm-cp agent CLOUD-64325, should be removed
      - iam.userAccounts.issueToken
      - iam.accessBindings.changeTopLevelResource

  internal.resource-manager.cleaner:
    groups: [resource-manager]
    name: 'resource-manager clouds cleaner'
    visibility: internal
    description: удаление неактивных облаков
    permissions:
      - resource-manager.clouds.deleteInactive

  internal.resource-manager.cloudsCreator:
    groups: [resource-manager]
    name: 'resource-manager clouds creator'
    visibility: internal
    description: создание облаков в организации
    permissions:
      - resource-manager.clouds.create

  internal.resource-manager.cloudsMove:
    groups: [resource-manager]
    name: 'resource-manager clouds move'
    visibility: internal
    description: перемещение облаков в организацию
    permissions:
      - iam.accessBindings.manageOwners

  internal.resourcereaper:
    groups: [resource-manager]
    name: 'resource reaper'
    visibility: internal
    description: полный доступ ко всем функциям в режиме чтения и записи, управление
      пользователями и политиками; доступ к приватным деструктивным функциям
    includedRoles:
      - resource-manager.clouds.member
      - admin
      - internal.logging.resourcereaper
    permissions:
      - alb.loadBalancers.forceDelete
      - billingInternal.accounts.bindCloud
      - compute.instanceGroups.forceDelete
      - compute.instanceGroups.forceStop
      - compute.instanceGroups.stop
      - compute.instanceGroups.update
      - iam.accessBindings.manageOwners
      - kms.keys.forceDelete
      - lockbox.secrets.forceDelete
      - certificate-manager.certificates.forceDelete
      - mdb.all.forceDelete
      - monitoring.configs.{get,list}
      - quota-manager.quotaRequests.delete
      - s3.internals.cleanUp

  internal.resource-manager.sync:
    groups: [resource-manager]
    name: Role for the service for syncing folders and clouds with external systems
    visibility: internal
    description: ''
    permissions:
      - resource-manager.clouds.get
      - resource-manager.clouds.listAccessBindings
      - resource-manager.clouds.updateAccessBindings
      - resource-manager.clouds.listPermissionStages
      - resource-manager.clouds.updatePermissionStages
      - resource-manager.clouds.listRestrictions
      - resource-manager.clouds.updateRestrictions
      - resource-manager.folders.create
      - resource-manager.folders.get
      - resource-manager.folders.listAccessBindings
      - resource-manager.folders.updateAccessBindings
      - iam.serviceAccounts.crossCloudBindings

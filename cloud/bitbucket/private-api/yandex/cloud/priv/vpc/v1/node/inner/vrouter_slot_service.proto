syntax = "proto3";

package yandex.cloud.priv.vpc.v1.node.inner;

import "google/protobuf/empty.proto";
import "yandex/cloud/priv/vpc/v1/node/inner/vrouter_slot.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/vpc/v1/node/inner;inner";
option java_outer_classname = "PVNIVSS";

service VRouterSlotService {
  // Missing state and request in response means unallocated slot.
  rpc List(google.protobuf.Empty) returns (VRouterSlotList);
  rpc Get(GetVRouterSlotRequest) returns (VRouterSlotData);

  rpc Allocate(VRouterSlotRequest) returns (VRouterSlotConfig);
  rpc Release(VRouterSlotRequest) returns (google.protobuf.Empty);

  rpc Enable(EnableVRouterSlotRequest) returns (VRouterSlotState);
  rpc Disable(VRouterSlotRequest) returns (VRouterSlotState);
}

message GetVRouterSlotRequest {
  int64 slot = 1;
}

message VRouterSlotRequest {
  // Either 'mainline' or 'experimental'
  string build = 1;

  // Release version string
  string release = 2;
}

message EnableVRouterSlotRequest {
  int64 slot = 1;
  bool activate = 2;
}

message VRouterSlotList {
  repeated VRouterSlotData slots = 1;
}

message VRouterSlotState {
  bool enabled = 1;
  bool active = 2;
}

message VRouterSlotData {
  VRouterSlotConfig config = 1;
  VRouterSlotRequest request = 2;
  VRouterSlotState state = 3;
}

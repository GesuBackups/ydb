syntax = "proto3";

package yandex.cloud.priv.datatransfer.v1.legacyendpoint;

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/datatransfer/v1/legacyendpoint;tm_server_legacyendpoint";

import "yandex/cloud/priv/datatransfer/v1/endpoint/common.proto";
import "yandex/cloud/priv/datatransfer/v1/endpoint/mysql.proto";
import "yandex/cloud/priv/sensitive.proto";

message OnPremiseMysqlSource {
    // IP or FQDN of the host
    // 
    // IP or FQDN database host for making connection with source data base.
    string host = 1;
    // Database port
    // 
    // Will be used if the cluster ID is not specified. Default: 6432.
    int64 port = 9;
    // Database name
    string database = 3;
    // Username
    // 
    // User for database access.
    string user = 2;
    // Password
    // 
    // Password for database access.
    string raw_password = 10 [(sensitive) = true];
    // PEM Certificate
    // 
    // Certificate for database connection.
    string pem_file_content = 8;
    // Network interface for endpoint
    // 
    // Default: public IPv4.
    string subnet_id = 30;
    // List of tables
    // 
    // If none or empty list is presented, all tables are replicated. Set as regular
    // expression.
    repeated string include_tables = 6;
    // Excluded tables
    // 
    // If none or empty list is presented, all tables are replicated. Set as regular
    // expression.
    repeated string exclude_tables = 7;
    // Database timezone
    // 
    // Is used for parsing timestamps for saving source timezones. Accepts values from
    // IANA timezone database. Default: local timezone.
    string timezone = 31;
    // Schema migration on transfer activation
    // 
    // Choose schema parts, which will be created on the start of transfer process.
    endpoint.MysqlDumpSteps pre_steps = 32;
    // Schema migration on transfer deactivation
    // 
    // Choose schema parts, which will be created on the end of transfer process.
    endpoint.MysqlDumpSteps post_steps = 33;
}
message ManagedMysqlSource {
    // Cluster ID
    string cluster_id = 1;
    // Database name
    string database = 3;
    // Username
    // 
    // User for database access.
    string user = 2;
    // Password
    string raw_password = 9 [(sensitive) = true];
    // Network interface for endpoint
    // 
    // Default: public IPv4.
    string subnet_id = 30;
    // List of tables
    // 
    // If none or empty list is presented, all tables are replicated. Set as regular
    // expression.
    repeated string include_tables = 7;
    // Excluded tables
    // 
    // If none or empty list is presented, all tables are replicated. Set as regular
    // expression.
    repeated string exclude_tables = 8;
    // Database timezone
    // 
    // Is used for parsing timestamps for saving source timezones. Accepts values from
    // IANA timezone database. Default: local timezone.
    string timezone = 31;
    // Schema migration on transfer activation
    // 
    // Choose schema parts, which will be created on the start of transfer process.
    endpoint.MysqlDumpSteps pre_steps = 32;
    // Schema migration on transfer deactivation
    // 
    // Choose schema parts, which will be created on the end of transfer process.
    endpoint.MysqlDumpSteps post_steps = 33;
}
message ManagedMysqlTarget {
    // Cluster ID
    string cluster_id = 1;
    // Database name
    string database = 5;
    // Replication username
    string user = 3;
    // Password
    // 
    // Password for database access.
    string raw_password = 7 [(sensitive) = true];
    string subnet_id = 30;
    // PEM Certificate
    string pem_file_content = 6;
    // Database timezone
    // 
    // Is used for parsing timestamps for saving source timezones. Accepts values from
    // IANA timezone database. Default: local timezone.
    string timezone = 22;
    // sql_mode
    // 
    // Default: NO_AUTO_VALUE_ON_ZERO,NO_DIR_IN_CREATE,NO_ENGINE_SUBSTITUTION.
    string sql_mode = 8;
    // Disable constraints checks
    // 
    // Recommend to disable for increase replication speed, but if schema contain
    // cascading operations we don't recommend to disable. This option set
    // FOREIGN_KEY_CHECKS=0 and UNIQUE_CHECKS=0.
    bool skip_constraint_checks = 9;
    // Cleanup policy
    // 
    // Cleanup policy for activate, reactivate and reupload processes. Default is drop.
    endpoint.CleanupPolicy cleanup_policy = 21;
}
message OnPremiseMysqlTarget {
    // Database host
    // 
    // Will be used if the cluster ID is not specified.
    string host = 1;
    // Database port
    // 
    // Will be used if the cluster ID is not specified. Default: 6432.
    int64 port = 2;
    // Database name
    string database = 5;
    // Username
    // 
    // User for database access.
    string user = 3;
    // Password
    // 
    // Password for database access.
    string raw_password = 7 [(sensitive) = true];
    // PEM Certificate
    string pem_file_content = 6;
    // Network interface for endpoint
    // 
    // Default: public IPv4.
    string subnet_id = 30;
    // Database timezone
    // 
    // Is used for parsing timestamps for saving source timezones. Accepts values from
    // IANA timezone database. Default: local timezone.
    string timezone = 22;
    // sql_mode
    // 
    // Default: NO_AUTO_VALUE_ON_ZERO,NO_DIR_IN_CREATE,NO_ENGINE_SUBSTITUTION.
    string sql_mode = 8;
    // Disable constraints checks
    // 
    // Recommend to disable for increase replication speed, but if schema contain
    // cascading operations we don't recommend to disable. This option set
    // FOREIGN_KEY_CHECKS=0 and UNIQUE_CHECKS=0.
    bool skip_constraint_checks = 9;
    // Cleanup policy
    // 
    // Cleanup policy for activate, reactivate and reupload processes. Default is drop.
    endpoint.CleanupPolicy cleanup_policy = 21;
}

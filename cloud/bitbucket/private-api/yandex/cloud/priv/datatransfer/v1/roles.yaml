role_groups:
  data-transfer:
    name: Data transfer roles

roles:
  internal.data-transfer.k8s-admin:
    groups: [data-transfer]
    name: DT K8s admin
    visibility: internal
    description: Внутренняя роль для управления сервисами k8s кластера
    permissions:
      - vpc.addresses.createExternal
      - vpc.addresses.createYandexOnly
      - vpc.addresses.useCustomFipBucket
      - vpc.addresses.useHints
      - vpc.useIpv6

  internal.data-transfer.agent:
    groups: [data-transfer]
    name: ''
    visibility: internal
    description: Внутренняя роль воркера Transfer Manager
    includedRoles:
      - mdb.viewer
      - data-transfer.admin
    permissions:
      - compute.networkInterfaces.attach
      - compute.networkInterfaces.detach
      - compute.networkInterfaces.{get,list}
      - vpc.networks.bridge
      - vpc.networks.configureExternalAccess
      - vpc.networks.createRouteTable
      - vpc.networks.use
      - vpc.networks.{get,list}
      - vpc.securityGroups.use
      - vpc.securityGroups.{get,list}
      - vpc.subnets.use
      - vpc.subnets.{get,list}
      - iam.clouds.get
      - iam.folders.get
      - resource-manager.folders.get
      - ydb.databases.{get,list}
      - iam.serviceAccounts.{get,list}
      - serverless.functions.{get,list}
      - s3.buckets.listBucket

  internal.data-transfer.admin:
    groups: [data-transfer]
    name: (Внутренняя) data-transfer
    visibility: internal
    description: ''
    permissions:
      - data-transfer.endpoints.get
      - data-transfer.transfers.get
      - data-transfer.endpoints.{create,update,delete}
      - data-transfer.transfers.{create,update,delete,use}

  data-transfer.viewer:
    groups: [data-transfer]
    name: Роль для чтения конфигураций Data Transfer-ов
    visibility: public
    description: ''
    permissions:
      - iam.clouds.get
      - iam.folders.get
      - resource-manager.folders.get
      - data-transfer.endpoints.get
      - data-transfer.transfers.get
      - data-transfer.quotas.get
      - data-transfer.endpoints.allow.{clickhouse,ydb,yds,object-storage,kafka,airbyte}
      - data-transfer.endpoints.allow.{postgresql-to-ydb,postgresql-to-object-storage}
      - data-transfer.endpoints.allow.{mysql-to-object-storage,mysql-to-ydb}
      - data-transfer.endpoints.allow.{mongodb,mongo-to-object-storage}
      - data-transfer.endpoints.allow.{oracle,oracle-to-clickhouse,oracle-to-postgresql}
      - data-transfer.endpoints.allow.greenplum
      - data-transfer.endpoints.allow.debezium
      - data-transfer.endpoints.allow.{logbroker,yc-from-logbroker,yc-to-logbroker}

  data-transfer.editor:
    groups: [data-transfer]
    name: Роль для редактирование конфигураций Data Transfer-ов
    visibility: public
    description: ''
    includedRoles:
      - data-transfer.viewer
    permissions:
      - data-transfer.endpoints.{create,update,delete}
      - data-transfer.transfers.{create,update,delete,use}

  data-transfer.admin:
    groups: [data-transfer]
    name: Роль для администрирования конфигураций Data Transfer-ов
    visibility: public
    description: ''
    includedRoles:
      - data-transfer.privateAdmin
    permissions:
      - data-transfer.transfers.createExternal

  data-transfer.privateAdmin:
    groups: [data-transfer]
    name: Роль для создания/активации трансферов, передающих данные через внутренние сети
    visibility: public
    description: ''
    includedRoles:
      - data-transfer.editor

  data-transfer.support:
    groups: [data-transfer, support]
    name: Support data-transfer
    description: Role for support engineers
    visibility: internal
    includedRoles:
      - data-transfer.viewer

  data-transfer.supportAdmin:
    groups: [data-transfer, support]
    name: Support data-transfer
    description: Role for support admin engineers
    visibility: internal
    includedRoles:
      - data-transfer.viewer
    permissions:
      - data-transfer.quotas.update
      - data-transfer.endpoints.{update}
      - data-transfer.transfers.{update,use}

  data-transfer.onCall:
    groups: [data-transfer, support]
    name: Support data-transfer
    description: Role for support admin engineers
    visibility: internal
    includedRoles:
      - mdb.viewer
      - data-transfer.viewer

  data-transfer.onCallAdmin:
    groups: [data-transfer, support]
    name: Support data-transfer
    description: Role for support admin engineers
    visibility: internal
    includedRoles:
      - mdb.viewer
      - data-transfer.admin
    permissions:
      - data-transfer.quotas.update

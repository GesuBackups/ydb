syntax = "proto3";

package yandex.cloud.priv.dns.v1.inner;

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/dns/v1/inner;dns";
option java_outer_classname = "PBS";

service BillingService {
  rpc SendMetrics (SendMetricsRequest) returns (SendMetricsResponse);
}

message SendMetricsRequest {
  int64 unix_timestamp = 1; // seconds since epoch
  repeated RequestMetric request_metrics = 2;
}

message SendMetricsResponse {
  // source_wt of billing metric written to LB. seconds since epoch
  int64 billing_unix_timestamp = 1;
}

message RequestMetric {
  string view_id = 1;
  string zone_id = 2; // empty when zone is not found

  int64 requests = 3; // since last SendMetrics request
}

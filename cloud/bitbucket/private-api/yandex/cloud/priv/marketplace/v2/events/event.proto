syntax = "proto3";

package yandex.cloud.priv.marketplace.v2.events;

import "yandex/cloud/priv/marketplace/v2/product_check.proto";
import "yandex/cloud/priv/marketplace/v2/product.proto";
import "yandex/cloud/priv/marketplace/v2/publisher.proto";
import "yandex/cloud/priv/marketplace/v2/publisher_version.proto";
import "yandex/cloud/priv/marketplace/v2/publisher_proposal.proto";
import "yandex/cloud/priv/marketplace/v2/product_version.proto";
import "yandex/cloud/priv/marketplace/v2/product_proposal.proto";


option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/marketplace/v2/events;marketplace_events";
option java_outer_classname = "PME";

message Event {
    string uuid = 1;
    oneof payload {
        PublisherEvent publisher_event = 2;
        PublisherVersionEvent publisher_version_event = 3;
        PublisherProposalEvent publisher_proposal_event = 4;
        ProductEvent product_event = 5;
        ProductVersionEvent product_version_event = 6;
        ProductProposalEvent product_proposal_event = 8;
        ProductCheckRunEvent product_check_run_event = 9;
    }
}

message PublisherEvent {
    Action action = 1;
    Publisher publisher = 2;

    enum Action {
        ACTION_UNSPECIFIED = 0;
        CREATED = 1;
        UPDATED = 2;
    }
}

message PublisherVersionEvent {
    Action action = 1;
    PublisherVersion publisher_version = 2;

    enum Action {
        ACTION_UNSPECIFIED = 0;
        CREATED = 1;
        UPDATED = 2;
    }
}
message PublisherProposalEvent {
    Action action = 1;
    PublisherProposal publisher_proposal = 2;

    enum Action {
        ACTION_UNSPECIFIED = 0;
        CREATED = 1;
        UPDATED = 2;
        VALIDATED = 3;
        APPROVED = 4;
        APPLIED = 5;
        REJECTED = 6;
        ERROR = 7;
    }
}


message ProductCheckRunEvent {
    Action action = 1;
    enum Action {
        ACTION_UNSPECIFIED = 0;
        CREATED = 1;
        COMPLETED = 2;
        REREQUESTED = 3;
    }
    ProductCheckRun check_run = 2;
}

message ProductEvent {
    Action action = 1;
    Product product = 2;

    enum Action {
        ACTION_UNSPECIFIED = 0;
        CREATED = 1;
        UPDATED = 2;
        DEPRECATED = 3;
    }
}
message ProductVersionEvent {
    Action action = 1;
    ProductVersion product_version = 2;

    enum Action {
        ACTION_UNSPECIFIED = 0;
        CREATED = 1;
        UPDATED = 2;
        DEPRECATED = 3;
    }
}
message ProductProposalEvent {
    Action action = 1;
    ProductProposal product_proposal = 2;

    enum Action {
        ACTION_UNSPECIFIED = 0;
        CREATED = 1;
        UPDATED = 2;
        VALIDATED = 3;
        APPROVED = 4;
        APPLIED = 5;
        REJECTED = 6;
        ERROR = 7;
    }
}

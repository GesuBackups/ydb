syntax = "proto3";

package yandex.cloud.priv.marketplace.v2;
import "yandex/cloud/priv/validation.proto";
import "google/protobuf/timestamp.proto";
import "yandex/cloud/priv/marketplace/v2/i18n.proto";
option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/marketplace/v2;marketplace";
option java_outer_classname = "PMPR";

//Public entity representing partner product owner
message LocalizedPartnerResponse {

    string id = 1;
    string name = 2;
    google.protobuf.Timestamp created_at = 3;
    google.protobuf.Timestamp updated_at = 4;
    Partner.State state = 5;
    LocalizedMarketingInfo marketing_info = 6;

    repeated string regions = 7;
    repeated string services = 8;
    repeated string use_cases = 9;
    repeated string industries = 10;

    message LocalizedMarketingInfo {
        string name = 1;
        string description = 2;
        string short_description = 3;
        string url = 4;
        string address = 5;
        string phone_number = 6;
        repeated LocalizedLink links = 7;
        string logo = 8;
    }
}

//Entity representing product owner in Partners Portal
message Partner {

    string id = 1;
    string version_id = 2;
    string name = 3;
    google.protobuf.Timestamp created_at = 4;
    google.protobuf.Timestamp updated_at = 5;
    State state = 6;
    MarketingInfo marketing_info = 7;

    repeated string regions = 8;
    repeated string services = 9;
    repeated string use_cases = 10;
    repeated string industries = 11;

    message MarketingInfo {
        TextI18n name = 1;
        TextI18n description = 2;
        TextI18n short_description = 3;
        TextI18n url = 4;
        TextI18n address = 5;
        TextI18n phone_number = 6;
        LinkListI18n links = 7;
        string logo = 8;
    }
    enum State {
        STATE_UNSPECIFIED = 0;
        PENDING = 1;
        ACTIVE = 2;
        SUSPENDED = 3;
        ERROR = 4;
    }
}

message PartnerGetRequest {
    string partner_id = 1 [(required) = true];
}

message PartnersListRequest {
    string page_token = 1;
    int64 page_size = 2;

}
message PartnersListResponse {
    string next_page_token = 1;
    repeated Partner partners = 2;
}

// proposals
message PartnerProposalMetadata {
    string partner_id = 1;
    string proposal_id = 2;
}

message PartnerProposalApplyRequest {
    string partner_id = 1 [(required) = true, (length) = "<=50"];
    string proposal_id = 2 [(required) = true, (length) = "<=50"];
}

message PartnerProposalRejectRequest {
    string partner_id = 1 [(required) = true, (length) = "<=50"];
    string proposal_id = 2 [(required) = true, (length) = "<=50"];
}

message PartnerProposalApproveRequest {
    string partner_id = 1 [(required) = true, (length) = "<=50"];
    string proposal_id = 2 [(required) = true, (length) = "<=50"];
}

message PartnerProposalDeleteRequest {
    string partner_id = 1 [(required) = true, (length) = "<=50"];
    string proposal_id = 2 [(required) = true, (length) = "<=50"];
}

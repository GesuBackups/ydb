syntax = "proto3";

package yandex.cloud.priv.marketplace.v1alpha1;

import "google/protobuf/timestamp.proto";
import "yandex/cloud/priv/marketplace/v1alpha1/resource_spec.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/marketplace/v1alpha1;marketplace";

// Familying mechanic for productFamilys as we must keep (and display to user)
// usage-critical (price limitations licenses) info immutable
// this info will be sufficient for user notifications with action items (migrate...)
// Mutable for publisher only via productFamily interface
message OsProductFamilyVersion {

  enum Status {
    STATUS_UNSPECIFIED = 0;
    PENDING = 1;
    REVIEW = 2;
    ACTIVE = 3;
    ACTIVATING = 4;
    DEPRECATED = 5; //still used by someone
    REJECTED = 6;
    ERROR = 7;
  }

  enum PricingOption {
    PRICING_OPTION_UNSPECIFIED = 0;
    FREE = 1;
    BYOL = 2;
    PAYG = 3;
    RESERVE = 4;
    TRIAL = 5;
  }

  // appProduct will inherit same image limitations
  // proprietary OS like OracleLinux can bring unpredictably restricful licensing
  message ResourceRestrictions {
    int64 cpu_min = 1;
    int64 cpu_max = 2;
    int64 ram_min = 3;
    int64 ram_max = 4;
    repeated string zone_id = 5;
  }
  message SkuResponse {
    string id = 1;
    string check_formula = 2;
  }
  string id = 1;
  google.protobuf.Timestamp created_at = 2; //requested for publishing
  google.protobuf.Timestamp published_at = 3; //actually published
  google.protobuf.Timestamp updated_at = 4; //actually published
  string billing_account_id = 5;
  string image_id = 6;
  string logo_id = 7;
  string logo_uri = 8;
  Status status = 9;
  ResourceSpec resource_spec = 10;
  PricingOption pricing_options = 11;
  string os_product_family_id = 12; //parent
  repeated SkuResponse skus = 13;
}

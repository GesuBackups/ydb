syntax = "proto3";

package yandex.cloud.priv.marketplace.v1alpha1;

import "google/protobuf/timestamp.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/marketplace/v1alpha1;marketplace";

message SkuDraft {
  enum Status {
    STATUS_UNSPECIFIED = 0;
    PENDING = 1;
    ACTIVE = 2;
    REJECTED = 3;
  }

  enum Unit {
    UNIT_UNSPECIFIED = 0;
    CORE_PER_SECOND = 1;
    INSTANCE_PER_SECOND = 2;
  }

  message PricingVersion {
    AggregationInfo aggregation_info = 1;
    PricingExpression pricing_expression = 2;
  }

  message PricingExpression {
    // Decimal
    string quantum = 1;
    Rate rates = 2;
  }

  message Rate {
    int64 start_pricing_quantity = 1;
    // Decimal
    string unit_price = 2;
  }

  message AggregationInfo {
    enum AggregationLevel {
      AGGREGATION_LEVEL_UNSPECIFIED = 0;
      BILLING_ACCOUNT_ID = 1;
    }
    enum AggregationInterval {
      AGGREGATION_INTERVAL_UNSPECIFIED = 0;
      MONTH = 1;
    }
    AggregationLevel level = 1;
    AggregationInterval interval = 2;
  }

  string id = 1;
  Status status = 2;
  string name = 3;
  string description = 4;
  Unit unit = 5;
  string publisher_account_id = 6;
  string billing_account_id = 7;
  google.protobuf.Timestamp created_at = 8;
  google.protobuf.Timestamp updated_at = 9;
  repeated PricingVersion pricing_versions = 10;
}

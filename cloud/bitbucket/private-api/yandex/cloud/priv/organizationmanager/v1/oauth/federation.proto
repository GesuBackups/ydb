syntax = "proto3";

package yandex.cloud.priv.organizationmanager.v1.oauth;

import "google/protobuf/duration.proto";
import "google/protobuf/timestamp.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/organizationmanager/v1/oauth;oauth";
option java_outer_classname = "POAF";

// An OAuth federation resource.
message Federation {

  // ID of the federation.
  string id = 1;

  // ID of the organization that the federation belongs to.
  string organization_id = 2;

  // Name of the federation.
  // The name is unique within the organization. 3-63 characters long.
  string name = 3;

  // Description of the federation. 0-256 characters long.
  string description = 4;

  // Creation timestamp.
  google.protobuf.Timestamp created_at = 5;

  // The 'IAM_COOKIE' cookie max age in seconds.
  // The value should be in range from 10 min to 12 hours.
  // The default value is 8 hours.
  google.protobuf.Duration cookie_max_age = 6;

  // The ID of the client registered in at Identity Provider.
  string client_id = 7;

  // Client authentication method.
  string client_authentication = 8;

  // OAuth scopes requested from IdP.
  repeated string scopes = 9;

  // Authorization endpoint.
  string authorization_endpoint = 10;

  // Endpoint to request access/refresh tokens from.
  string token_endpoint = 11;

  // OIDC userinfo endpoint.
  string userinfo_endpoint = 12;

  // Mapping to apply to claims fetched from IdP.
  // Local OAuth claim name -> claim from IdP to map from.
  map <string, string> default_claims_mapping = 13;

  // Auto create accounts for new user on first login.
  bool auto_create_account_on_login = 14;

  // Whether the federation is global or not.
  bool is_global = 15;

  // Resource labels as `` key:value `` pairs.
  map<string, string> labels = 16;
}

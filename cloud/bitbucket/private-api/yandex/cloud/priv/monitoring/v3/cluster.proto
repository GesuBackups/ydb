syntax = "proto3";

package yandex.cloud.priv.monitoring.v3;

import "google/protobuf/timestamp.proto";
import "yandex/cloud/priv/monitoring/v3/shard_settings.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/monitoring/v3;monitoring";

// A Cluster resource.
message Cluster {
    // ID of the cluster.
    string id = 1;

    // ID of the folder that the cluster belongs on.
    string folder_id = 2;

    // Creation timestamp.
    google.protobuf.Timestamp created_at = 4;

    // Modification timestamp.
    google.protobuf.Timestamp modified_at = 5;

    // ID of the user who created the cluster.
    string created_by = 6;

    // ID of the user who modified the cluster.
    string modified_by = 7;

    // Description of the cluster.
    string description = 8;

    // Resource labels as `key:value` pairs.
    map<string, string> labels = 9;

    // Label name of the cluster.
    string label_name = 10;

    // Shard settings.
    ShardSettings shard_settings = 11;

    // Hosts.
    repeated PatternHost hosts = 12;

    // Host urls.
    repeated HostUrl host_urls = 13;

    // Conductor groups.
    repeated ConductorGroup conductor_groups = 14;

    // Conductor tags.
    repeated ConductorTag conductor_tags = 15;

    // Nanny groups.
    repeated NannyGroup nanny_groups = 16;

    // Qloud groups.
    repeated QloudGroup qloud_groups = 17;

    // Networks.
    repeated Network networks = 18;

    // YP clusters.
    repeated YpCluster yp_clusters = 19;

    // Instance groups.
    repeated InstanceGroup instance_groups = 20;
}

message PatternHost {
    string url_pattern = 1;

    string ranges = 2;

    string dc = 3;

    map<string, string> labels = 4;
}

message HostUrl {
    string url = 1;

    bool ignore_ports = 2;

    map<string, string> labels = 3;
}

message ConductorGroup {
    string group = 1;

    map<string, string> labels = 3;
}

message ConductorTag {
    string name = 1;

    map<string, string> labels = 3;
}

message NannyGroup {
    string service = 1;

    bool use_fetched_port = 2;

    int64 port_shift = 3;

    repeated string cfg_group = 4;

    map<string, string> labels = 5;
}

message QloudGroup {
    string component = 1;

    string environment = 2;

    string application = 3;

    string project = 4;

    string deployment = 5;

    map<string, string> labels = 6;
}

message Network {
    string network = 1;

    int64 port = 2;

    map<string, string> labels = 3;
}

message YpCluster {
    string pod_set_id = 1;

    string cluster = 2;

    string yp_label = 3;

    string tvm_label = 4;

    map<string, string> labels = 5;
}

message InstanceGroup {
    string instance_group_id = 1;

    string folder_id = 2;

    map<string, string> labels = 3;
}

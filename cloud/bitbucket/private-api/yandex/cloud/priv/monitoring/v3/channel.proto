syntax = "proto3";

package yandex.cloud.priv.monitoring.v3;

import "google/protobuf/duration.proto";
import "google/protobuf/timestamp.proto";
import "yandex/cloud/priv/monitoring/v3/evaluation_status.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/monitoring/v3;monitoring";

// An Channel resource.
message Channel {
    // ID of the channel.
    string id = 1;

    // ID of the folder that the channel belongs on.
    string folder_id = 2;

    // Creation timestamp.
    google.protobuf.Timestamp created_at = 3;

    // Modification timestamp.
    google.protobuf.Timestamp modified_at = 4;

    // ID of the user who created the channel.
    string created_by = 5;

    // ID of the user who modified the channel.
    string modified_by = 6;

    // Name of the channel.
    string name = 7;

    // Description of the channel.
    string description = 8;

    // Resource labels as `key:value` pairs.
    map<string, string> labels = 9;

    // Send event only about specified alert evaluation status.
    repeated EvaluationStatus notify_about_statuses = 10;

    // Repeat notification period in seconds. Zero means no repeating.
    google.protobuf.Duration repeat_period = 11;

    oneof type {
        // E-Mail channel.
        EmailChannel email = 12;

        // Juggler channel.
        JugglerChannel juggler = 13;

        // Webhook channel.
        WebhookChannel webhook = 14;

        // SMS channel.
        SmsChannel sms = 15;

        // Telegram channel.
        TelegramChannel telegram = 16;

        // Yandex Messenger channel.
        YandexMessengerChannel yandex_messenger = 17;

        // E-Mail channel for cloud users.
        CloudEmailChannel cloud_email = 18;

        // SMS channel for cloud users.
        CloudSmsChannel cloud_sms = 19;

        // Mobile application push channel for cloud users.
        CloudMobilePushChannel cloud_mobile_push = 20;
    }
}

message EmailChannel {
    string subject_template = 1;

    string content_template = 2;

    repeated string recipients = 3;
}

message JugglerChannel {
    string host = 1;

    string service = 2;

    string description = 3;

    repeated string tags = 4;
}

message WebhookChannel {
    string url = 1;

    string body_template = 2;

    map<string, string> headers = 3;
}

message SmsChannel {
    oneof type {
        string login = 1;
    }

    string text_template = 3;
}

message TelegramChannel {
    oneof type {
        string login = 1;

        string group_title = 2;
    }

    string text_template = 3;

    bool send_screenshot = 4;
}

message YandexMessengerChannel {
    oneof type {
        string login = 1;

        string group_id = 2;
    }

    string text_template = 3;
}

message CloudEmailChannel {
    repeated string recipients = 1;
}

message CloudSmsChannel {
    repeated string recipients = 1;
}

message CloudMobilePushChannel {
    repeated string recipients = 1;
}

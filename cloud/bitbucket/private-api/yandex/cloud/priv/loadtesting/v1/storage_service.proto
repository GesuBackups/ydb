syntax = "proto3";

package yandex.cloud.priv.loadtesting.v1;

import "yandex/cloud/priv/validation.proto";
import "yandex/cloud/api/operation.proto";
import "yandex/cloud/priv/operation/operation.proto";
import "yandex/cloud/priv/loadtesting/v1/storage.proto";


option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/loadtesting/v1;loadtesting";
option java_outer_classname = "PLTSS";


service StorageService {
  rpc Create (CreateStorageRequest) returns (operation.Operation) {
    option (yandex.cloud.api.operation) = {
      metadata: "CreateStorageMetadata"
      response: "Storage"
    };
  };
  rpc Delete (DeleteStorageRequest) returns (operation.Operation) {
    option (yandex.cloud.api.operation) = {
      metadata: "DeleteStorageMetadata"
      response: "google.protobuf.Empty"
    };
  };
  rpc Get (GetStorageRequest) returns (Storage);
  rpc Update (UpdateStorageRequest) returns (operation.Operation) {
    option (yandex.cloud.api.operation) = {
      metadata: "UpdateStorageMetadata"
      response: "Storage"
    };
  };
  rpc List (ListStorageRequest) returns (ListStorageResponse);
  rpc UploadObject (UploadStorageObjectRequest) returns (StorageObject);
}

message CreateStorageRequest {
  string folder_id = 1 [(yandex.cloud.priv.required) = true, (yandex.cloud.priv.length) = "<=50"];
  string object_storage_bucket_name = 2 [(yandex.cloud.priv.required) = true, (yandex.cloud.priv.length) = "<=50"];
  string name = 3 [(yandex.cloud.priv.pattern) = "|[a-z][-a-z0-9]{1,61}[a-z0-9]"];
  string description = 4 [(yandex.cloud.priv.length) = "<=256"];
}

message DeleteStorageRequest {
  string storage_id = 1 [(yandex.cloud.priv.required) = true, (yandex.cloud.priv.length) = "<=50"];
}

message GetStorageRequest {
  string storage_id = 1 [(yandex.cloud.priv.required) = true, (yandex.cloud.priv.length) = "<=50"];
}

message UpdateStorageRequest {
  string storage_id = 1 [(yandex.cloud.priv.required) = true, (yandex.cloud.priv.length) = "<=50"];
  string name = 2 [(yandex.cloud.priv.pattern) = "|[a-z][-a-z0-9]{1,61}[a-z0-9]"];
  string description = 3 [(yandex.cloud.priv.length) = "<=256"]; 
}

message ListStorageRequest {
  string storage_id = 1 [(yandex.cloud.priv.required) = true, (yandex.cloud.priv.length) = "<=50"];
}

message ListStorageResponse {
  repeated Storage storages = 1;
  string next_page_token = 2;
}

message UploadStorageObjectRequest {
  string storage_id = 1 [(yandex.cloud.priv.length) = "<=50"];
  string folder_id = 2 [(yandex.cloud.priv.required) = true, (yandex.cloud.priv.length) = "<=50"];
  string filename = 3 [(yandex.cloud.priv.length) = "<=50"];
  bytes test_data = 4 [(yandex.cloud.priv.required) = true];
}

message CreateStorageMetadata {
  string storage_id = 1;
}

message DeleteStorageMetadata {
  string storage_id = 1;
}

message UpdateStorageMetadata {
  string storage_id = 1;
}

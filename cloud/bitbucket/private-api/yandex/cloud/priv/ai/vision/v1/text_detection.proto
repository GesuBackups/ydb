syntax = "proto3";

package yandex.cloud.priv.ai.vision.v1;

import "yandex/cloud/priv/sensitive.proto";
import "yandex/cloud/priv/ai/vision/v1/primitives.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/ai/vision/v1;vision";

message TextAnnotation {
  repeated Page pages = 1;
}

message Page {
  int64 width = 1;
  int64 height = 2;
  repeated Block blocks = 3;
  repeated Entity entities = 4;
}

message Entity {
  string name = 1;
  string text = 2;
}

message Block {
  Polygon bounding_box = 1;
  repeated Line lines = 2;
}

message Line {
  Polygon bounding_box = 1;
  repeated Word words = 2;
  double confidence = 3;
}

message Word {
  Polygon bounding_box = 1;
  string text = 2  [(sensitive) = true];
  double confidence = 3;

  message DetectedLanguage {
    string language_code = 1;
    double confidence = 2;
  }

  repeated DetectedLanguage languages = 4;
  int64 entity_index = 5;
}

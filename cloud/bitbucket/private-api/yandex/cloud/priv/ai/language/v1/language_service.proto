syntax = "proto3";

package yandex.cloud.priv.ai.language.v1;

import "yandex/cloud/priv/validation.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/ai/language/v1;language";

service LanguageService {
  rpc AnalyzeEntities(AnalyzeEntitiesRequest) returns (AnalyzeEntitiesResponse) {
  }
}

// The entity analysis request message.
message AnalyzeEntitiesRequest {
  Document document = 1 [(required) = true];

  string folder_id = 2 [(length) = "<=50"];
}

message Document {
  oneof source {
    option (exactly_one) = true;
    string content = 1 [(length) = "<=5000"];
  }

  string language_code = 2 [(length) = "<=3"];
}

message AnalyzeEntitiesResponse {
  repeated Entity entities = 1;
}

message Entity {
  enum Type {
    TYPE_UNSPECIFIED = 0;
    PERSON = 1;
    LOCATION = 2;
    ORGANIZATION = 3;
    EVENT = 4;
    WORK_OF_ART = 5;
    DATE = 6;
    NUMBER = 7;
    PRICE = 8;
    OTHER = 9;
  }

  string name = 1;

  Type type = 2;

  repeated EntityMention mentions = 3;
}

message EntityMention {
  enum Type {
    TYPE_UNSPECIFIED = 0;
    PROPER = 1;
    COMMON = 2;
  }

  string text = 1;

  int64 offset = 2;

  Type type = 3;
}

syntax = "proto3";

package yandex.cloud.priv.maintenance.v1;

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/maintenance/v1;maintenance";
option java_outer_classname = "PMS";

service MaintenanceService {

  rpc ExecuteCommand(ExecuteCommandRequest) returns (stream CommandExecutionResponse);
}

message ExecuteCommandRequest {
  string payload = 1;
}

message CommandExecutionResponse {
  oneof content {
    CommandExecutionLogs logs = 1;
  }
}

message CommandExecutionLogs {
  string message = 1;
  CommandLogDestination destination = 2;
}

enum CommandLogDestination {
  COMMAND_LOG_DESTINATION_UNSPECIFIED = 0;
  INFO = 1;
  ERROR = 2;
}
